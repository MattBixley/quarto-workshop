---
title: "Quarto for Data Science Reporting"
format:
  html:
    code-fold: true
    echo: true
    number-sections: true
    warning: false
    message: false
toc: true
crossref:
  fig-title: Figure  # (default is "Figure")
  tbl-title: Table   # (default is "Table")
  title-delim: "â€”"   # (default is ":")
bibliography: references.bib
---

# Introduction

Quarto is a modern authoring system for reproducible documents that combines prose, code, figures, tables, and citations in a single workflow. It supports multiple languages and advanced features such as cross-references, figure/table captions, and parameters for reproducible reporting.

# Key features used in this report

-   Executable R code chunks with labels and options (for reproducibility and figure/table naming).
-   Automatic figure and table captions and cross-references via chunk options `fig-cap` and `tbl-cap`.
-   Citation support via a bibliography file.

```{R}
#| label: setup
#| include: false

# minimal package setup for the examples
library(tidyverse)
library(palmerpenguins)
library(gt)
library(ggplot2)
library(scales)

# ensure the dataset is available
data("penguins", package = "palmerpenguins")
```

## Simple data summary

This report uses the palmerpenguins dataset to illustrate a typical data science report workflow: brief data summary, table output with gt, visualizations with ggplot2, and narrative text that references figures and tables. The Quarto/R workflow and chunk options used here follow patterns described in Quarto and R for Data Science documentation.

```{r}
#| label: data-summary

summary_tbl <- penguins %>%
  select(species, island, bill_length_mm, bill_depth_mm, flipper_length_mm, body_mass_g) %>%
  skimr::skim() # quick check; not printed in final doc
```

## Tables 

### species-level summary

The table below summarizes key numeric variables grouped by species (mean and count). The table is generated with gt and captioned so it can be cross-referenced in the text (@tbl-species-summary).

```{r}
#| label: tbl-species-summary
#| tbl-cap: "Summary of numeric measurements by species."

species_summary <- penguins %>%
  group_by(species) %>%
  summarise(
    n = sum(!is.na(body_mass_g)),
    mean_body_mass = mean(body_mass_g, na.rm = TRUE),
    mean_flipper = mean(flipper_length_mm, na.rm = TRUE),
    mean_bill_length = mean(bill_length_mm, na.rm = TRUE)
  ) %>%
  arrange(desc(n))

species_summary %>%
  gt() %>%
  fmt_number(
    columns = vars(mean_body_mass, mean_flipper, mean_bill_length),
    decimals = 1
  ) %>%
  cols_label(
    n = "Count",
    mean_body_mass = "Mean body mass (g)",
    mean_flipper = "Mean flipper length (mm)",
    mean_bill_length = "Mean bill length (mm)"
  )
```

Refer to @tbl-species-summary for species summaries.

### individuals

```{R}
#| label: tbl-observations
#| tbl-cap: "Numeric measurements of individuals."


penguins %>%
  slice_head(n = 10) %>%
  gt() %>%
  cols_label(
    species = "Species",
    island = "Island",
    bill_length_mm = "Bill (mm)",
    bill_depth_mm  = "Bill depth (mm)",
    flipper_length_mm = "Flipper (mm)",
    body_mass_g = "Body mass (g)",
    sex = "Sex"
  ) %>%
  fmt_number(
    columns = c("bill_length_mm", "bill_depth_mm", "flipper_length_mm"),
    decimals = 1
  ) %>%
  fmt_number(
    columns = c("body_mass_g"),
    decimals = 0
  )
```

Refer to @tbl-observations for the individual observations and to @tbl-colours for a table with colourized cells.

### colours

```{R}
#| label: tbl-colours
#| tbl-cap: "Body mass (g)."

body_range <- range(penguins$body_mass_g, na.rm = TRUE)

penguins %>%
  slice_head(n = 10) %>%
  gt() %>%
  cols_label(body_mass_g = "Body mass (g) with highlighting") %>%
  data_color(
    columns = c("body_mass_g"),
    colors = col_numeric(
      palette = c("lightyellow", "orange", "red"),
      domain = body_range
    )
  ) %>%
  fmt_number(columns = vars(body_mass_g), decimals = 0)
```



## Plots

### distributions and comparisons

The following figure shows body mass distributions by species (@fig-bodymass-by-species). The chunk has a fig-cap so Quarto creates a numbered figure and allows cross-references.

```{r}
#| label: fig-bodymass-by-species
#| fig-cap: "Distribution of body mass by species."
#| echo: false
ggplot(penguins, aes(x = body_mass_g, fill = species)) +
  geom_density(alpha = 0.5, na.rm = TRUE) +
  theme_minimal() +
  labs(x = "Body mass (g)", y = "Density")
```

@fig-bodymass-by-species shows differences in body mass distributions across the three penguin species. A scatter plot of bill length vs bill depth, colored by species, helps illustrate morphological differences (@fig-bill-scatter))

```{R}
#| label: fig-bill-scatter
#| fig-cap: "Bill length versus bill depth, by species."
#| echo: false
ggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm, color = species)) +
  geom_point(na.rm = TRUE, alpha = 0.7) +
  theme_minimal() +
  labs(x = "Bill length (mm)", y = "Bill depth (mm)")

```

# Inline code and dynamic text

This document uses inline R to include computed values in prose. For example, the dataset contains **`r sum(!is.na(penguins$body_mass_g))`** recorded body mass measurements across all observations.

# Reproducibility and references

Quarto uses knitr and Pandoc to run code and produce finished outputs; this workflow enables reproducible documents that combine narrative and analysis. For a compact tutorial and workshop materials, see the Quarto workshop and documentation resources referenced here.

At the end of the file include a short "References" citation marker by adding a bibliography file `references.bib` and the YAML already references it.

These references let you cite the workshop, Quarto site, and R for Data Science in your Quarto .qmd files using citation keys like @mock_quarto_workshop and @r4ds_quarto where needed. The narrative in index.qmd already references these resources with inline narrative citations using the bibliography.
